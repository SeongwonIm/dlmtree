<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Treed Distributed Lag Mixture Models (Deprecated) — tdlmm • dlmtree</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Treed Distributed Lag Mixture Models (Deprecated) — tdlmm"><meta name="description" content="TDLMM is a method for estimating a Treed Distributed Lag
Mixture Model. It operates by building an ensemble of pairs of regression
trees. Each tree in a tree-pair partitions the time span of the exposure data
and estimates a piecewise constant distributed lag effect. The two trees
are then intersected to create an interaction surface for estimating the
interaction between two exposures. Exposures are selected for each tree
stochastically and each exposure or interaction has a unique shrinkage
variance component. This allows for exposure variable selection in addition
to the estimation of the distributed lag mixture model."><meta property="og:description" content="TDLMM is a method for estimating a Treed Distributed Lag
Mixture Model. It operates by building an ensemble of pairs of regression
trees. Each tree in a tree-pair partitions the time span of the exposure data
and estimates a piecewise constant distributed lag effect. The two trees
are then intersected to create an interaction surface for estimating the
interaction between two exposures. Exposures are selected for each tree
stochastically and each exposure or interaction has a unique shrinkage
variance component. This allows for exposure variable selection in addition
to the estimation of the distributed lag mixture model."><meta property="og:image" content="https://danielmork.github.io/dlmtree/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dlmtree</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-treed-dlm" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Treed DLM</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-treed-dlm"><li><a class="dropdown-item" href="../articles/TDLM.html">TDLM</a></li>
    <li><a class="dropdown-item" href="../articles/TDLNM.html">TDLNM</a></li>
    <li><a class="dropdown-item" href="../articles/TDLMM.html">TDLMM</a></li>
    <li><a class="dropdown-item" href="../articles/HDLM.html">HDLM</a></li>
    <li><a class="dropdown-item" href="../articles/HDLMM.html">HDLMM</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/danielmork/dlmtree/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Treed Distributed Lag Mixture Models (Deprecated)</h1>
      <small class="dont-index">Source: <a href="https://github.com/danielmork/dlmtree/blob/master/R/tdlmm.R" class="external-link"><code>R/tdlmm.R</code></a></small>
      <div class="d-none name"><code>tdlmm.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>TDLMM is a method for estimating a Treed Distributed Lag
Mixture Model. It operates by building an ensemble of pairs of regression
trees. Each tree in a tree-pair partitions the time span of the exposure data
and estimates a piecewise constant distributed lag effect. The two trees
are then intersected to create an interaction surface for estimating the
interaction between two exposures. Exposures are selected for each tree
stochastically and each exposure or interaction has a unique shrinkage
variance component. This allows for exposure variable selection in addition
to the estimation of the distributed lag mixture model.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tdlmm</span><span class="op">(</span></span>
<span>  <span class="va">formula</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">exposure.data</span>,</span>
<span>  n.trees <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  n.burn <span class="op">=</span> <span class="fl">2000</span>,</span>
<span>  n.iter <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>  n.thin <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  family <span class="op">=</span> <span class="st">"gaussian"</span>,</span>
<span>  binomial.size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  formula.zi <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  keep_XZ <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  mixture.interactions <span class="op">=</span> <span class="st">"noself"</span>,</span>
<span>  tree.params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.95</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  step.prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.25</span>, <span class="fl">0.25</span><span class="op">)</span>,</span>
<span>  mix.prior <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  shrinkage <span class="op">=</span> <span class="st">"exposures"</span>,</span>
<span>  subset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  diagnostics <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  initial.params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>object of class formula, a symbolic description of the fixed
effect model to be fitted, e.g. y ~ a + b</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>data frame containing variables used in the formula</p></dd>


<dt id="arg-exposure-data">exposure.data<a class="anchor" aria-label="anchor" href="#arg-exposure-data"></a></dt>
<dd><p>named list containing equally sized numerical matrices
of exposure data with same, having same length as data</p></dd>


<dt id="arg-n-trees">n.trees<a class="anchor" aria-label="anchor" href="#arg-n-trees"></a></dt>
<dd><p>integer for number of trees in ensemble</p></dd>


<dt id="arg-n-burn">n.burn<a class="anchor" aria-label="anchor" href="#arg-n-burn"></a></dt>
<dd><p>integer for length of burn-in</p></dd>


<dt id="arg-n-iter">n.iter<a class="anchor" aria-label="anchor" href="#arg-n-iter"></a></dt>
<dd><p>integer for number of iterations to run model after burn-in</p></dd>


<dt id="arg-n-thin">n.thin<a class="anchor" aria-label="anchor" href="#arg-n-thin"></a></dt>
<dd><p>integer thinning factor, i.e. keep every tenth iteration</p></dd>


<dt id="arg-family">family<a class="anchor" aria-label="anchor" href="#arg-family"></a></dt>
<dd><p>'gaussian' for continuous response, 'logit' for binomial
response with logit link, or 'zinb' for zero-inflated negative binomial with logit link</p></dd>


<dt id="arg-binomial-size">binomial.size<a class="anchor" aria-label="anchor" href="#arg-binomial-size"></a></dt>
<dd><p>integer type scalar (if all equal, default = 1) or
vector defining binomial size for 'logit' family</p></dd>


<dt id="arg-formula-zi">formula.zi<a class="anchor" aria-label="anchor" href="#arg-formula-zi"></a></dt>
<dd><p>object of class formula, a symbolic description of the ZI
model to be fitted, e.g. y ~ a + b. This only applies to ZINB where covariates for
ZI model is different from NB model. This is same as the main formula by default</p></dd>


<dt id="arg-keep-xz">keep_XZ<a class="anchor" aria-label="anchor" href="#arg-keep-xz"></a></dt>
<dd><p>FALSE (default) or TRUE: keep the model scale exposure and covariate data</p></dd>


<dt id="arg-mixture-interactions">mixture.interactions<a class="anchor" aria-label="anchor" href="#arg-mixture-interactions"></a></dt>
<dd><p>'noself' (default) which estimates interactions
only between two different exposures, 'all' which also allows
interactions within the same exposure, or 'none' which eliminates all
interactions and estimates only main effects of each exposure</p></dd>


<dt id="arg-tree-params">tree.params<a class="anchor" aria-label="anchor" href="#arg-tree-params"></a></dt>
<dd><p>numerical vector of alpha and beta hyperparameters
controlling tree depth (see Bayesian CART, 1998), default: alpha = 0.95,
beta = 2</p></dd>


<dt id="arg-step-prob">step.prob<a class="anchor" aria-label="anchor" href="#arg-step-prob"></a></dt>
<dd><p>numerical vector for probability of 1) grow/prune,
2) change, 3) switch exposure, defaults to (0.25, 0.25, 0.25) or equal
probability of each step for tree updates</p></dd>


<dt id="arg-mix-prior">mix.prior<a class="anchor" aria-label="anchor" href="#arg-mix-prior"></a></dt>
<dd><p>positive scalar hyperparameter for sparsity of exposures</p></dd>


<dt id="arg-shrinkage">shrinkage<a class="anchor" aria-label="anchor" href="#arg-shrinkage"></a></dt>
<dd><p>character "all" (default), "trees", "exposures", "none",
turns on horseshoe-like shrinkage priors for different parts of model</p></dd>


<dt id="arg-subset">subset<a class="anchor" aria-label="anchor" href="#arg-subset"></a></dt>
<dd><p>integer vector to analyze only a subset of data and exposures</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>TRUE (default) or FALSE: print output</p></dd>


<dt id="arg-diagnostics">diagnostics<a class="anchor" aria-label="anchor" href="#arg-diagnostics"></a></dt>
<dd><p>TRUE or FALSE (default) keep model diagnostic such as
terminal nodes, acceptance details, etc.</p></dd>


<dt id="arg-initial-params">initial.params<a class="anchor" aria-label="anchor" href="#arg-initial-params"></a></dt>
<dd><p>initial parameters for fixed effects model, FALSE = none (default), "glm" = generate using GLM, or user defined, length must equal number of parameters in fixed effects model</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>NA</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>object of class 'tdlmm'</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>tdlmm</p>
<p>Model is recommended to be run for at minimum 5000 burn-in
iterations followed by 15000 sampling iterations with a thinning factor of 5.
Convergence can be checked by re-running the model and validating consistency
of results.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Daniel Mork, Seongwon Im, Ander Wilson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

